processors:
  attributes/appdynamics:
    actions:
      - key: "appdynamics.tier"
        from_attribute: "http.host"
        action: insert
      - key: "appdynamics.app"
        value: bookings
        action: insert
      - key: "appdynamics.node"
        value: "0"
        action: insert

receivers:
  otlp:
    protocols:
      grpc:
  hostmetrics:
    collection_interval: 10s
    scrapers:
      process:
        include:
          match_type: "docker*"

exporters:
  logging:
    loglevel: debug
    sampling_initial: 5
    sampling_thereafter: 5
  appdynamics:
    traces:
      http:
        endpoint: http://ingest:5000/ingest
    metrics:
      http:
        endpoint: ingest:5000
    account: customer1
    access_key: key


service:
  pipelines:
    traces:
      receivers: [otlp]
      exporters: [appdynamics]

    metrics:
      receivers: [hostmetrics]
      exporters: [appdynamics]